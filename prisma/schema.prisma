generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "postgresql"
}

// ==========================================
// AUTH & USER MANAGEMENT
// ==========================================

enum UserRole {
  SUPER_ADMIN
  ADMIN
  TEACHER
  STUDENT
}

enum UserStatus {
  ACTIVE
  INACTIVE
  SUSPENDED
}

model User {
  id          String     @id // Syncs with Supabase auth.users.id
  email       String     @unique
  name        String
  role        UserRole   @default(STUDENT)
  status      UserStatus @default(ACTIVE)
  avatar      String?
  phone       String?
  lastLoginAt DateTime?  @map("last_login_at")
  createdAt   DateTime   @default(now()) @map("created_at")
  updatedAt   DateTime   @updatedAt @map("updated_at")
  createdById String?    @map("created_by_id")
  createdBy   User?      @relation("CreatedByUser", fields: [createdById], references: [id])
  createdUsers User[]    @relation("CreatedByUser")

  @@map("users")
}

// ==========================================
// PENDAFTARAN
// ==========================================

model Pendaftaran {
  id                  String            @id @default(cuid())
  namaLengkap         String            @map("nama_lengkap")
  jenisKelamin        JenisKelamin      @map("jenis_kelamin")
  programKeahlian     ProgramKeahlian   @map("program_keahlian")
  nisn                String            @unique
  nik                 String            @unique
  nomorKk             String            @map("nomor_kk")
  tempatLahir         String            @map("tempat_lahir")
  tanggalLahir        DateTime          @map("tanggal_lahir")
  noHpMurid           String?           @map("no_hp_murid")
  noHpOrtu            String            @map("no_hp_ortu")
  alamatJalan         String            @map("alamat_jalan")
  rt                  String
  rw                  String
  kelurahanDesa       String            @map("kelurahan_desa")
  kecamatan           String
  kotaKabupaten       String            @map("kota_kabupaten")
  provinsi            String
  namaAyah            String            @map("nama_ayah")
  tahunLahirAyah      Int?              @map("tahun_lahir_ayah")
  pendidikanAyah      Pendidikan        @map("pendidikan_ayah")
  pekerjaanAyah       String?           @map("pekerjaan_ayah")
  namaIbu             String            @map("nama_ibu")
  tahunLahirIbu       Int?              @map("tahun_lahir_ibu")
  pendidikanIbu       Pendidikan        @map("pendidikan_ibu")
  pekerjaanIbu        String?           @map("pekerjaan_ibu")
  namaAsalSekolah     String            @map("nama_asal_sekolah")
  npsnAsalSekolah     String?           @map("npsn_asal_sekolah")
  alamatAsalSekolah   String            @map("alamat_asal_sekolah")
  createdAt           DateTime          @default(now()) @map("created_at")
  updatedAt           DateTime          @updatedAt @map("updated_at")
  email_murid         String?
  hubungan_wali       String?
  kode_pos            String?
  nama_wali           String?
  no_telp_ayah        String?
  no_telp_ibu         String?
  no_telp_wali        String?
  nomor_pendaftaran   String?           @unique
  pekerjaan_wali      String?
  pendidikan_wali     Pendidikan?
  status              StatusPendaftaran @default(PENDING)
  tahun_lahir_wali    Int?
  tahun_lulus         Int
  tanggal_pendaftaran DateTime          @default(now())

  @@map("pendaftaran")
}

model HeroSlide {
  id        String   @id @default(cuid())
  title     String
  subtitle  String?
  image     String
  ctaText   String?  @map("cta_text")
  ctaLink   String?  @map("cta_link")
  order     Int      @default(0)
  isActive  Boolean  @default(true) @map("is_active")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("hero_slides")
}

model Program {
  id           String            @id @default(cuid())
  name         String
  abbreviation String
  description  String
  color        String
  image        String?
  order        Int               @default(0)
  isActive     Boolean           @default(true) @map("is_active")
  createdAt    DateTime          @default(now()) @map("created_at")
  updatedAt    DateTime          @updatedAt @map("updated_at")
  careers      ProgramCareer[]
  facilities   ProgramFacility[]
  skills       ProgramSkill[]

  @@map("programs")
}

model ProgramSkill {
  id        String   @id @default(cuid())
  programId String   @map("program_id")
  name      String
  order     Int      @default(0)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  program   Program  @relation(fields: [programId], references: [id], onDelete: Cascade)

  @@map("program_skills")
}

model ProgramCareer {
  id        String   @id @default(cuid())
  programId String   @map("program_id")
  name      String
  order     Int      @default(0)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  program   Program  @relation(fields: [programId], references: [id], onDelete: Cascade)

  @@map("program_careers")
}

model ProgramFacility {
  id        String   @id @default(cuid())
  programId String   @map("program_id")
  name      String
  order     Int      @default(0)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  program   Program  @relation(fields: [programId], references: [id], onDelete: Cascade)

  @@map("program_facilities")
}

model News {
  id          String    @id @default(cuid())
  title       String
  slug        String    @unique
  content     String
  excerpt     String?
  image       String?
  category    String
  isFeatured  Boolean   @default(false) @map("is_featured")
  isPublished Boolean   @default(false) @map("is_published")
  publishedAt DateTime? @map("published_at")
  createdAt   DateTime  @default(now()) @map("created_at")
  updatedAt   DateTime  @updatedAt @map("updated_at")

  @@map("news")
}

model Testimonial {
  id        String          @id @default(cuid())
  name      String
  role      String
  quote     String
  type      TestimonialType
  image     String?
  order     Int             @default(0)
  isActive  Boolean         @default(true) @map("is_active")
  createdAt DateTime        @default(now()) @map("created_at")
  updatedAt DateTime        @updatedAt @map("updated_at")

  @@map("testimonials")
}

model Achievement {
  id        String           @id @default(cuid())
  title     String
  event     String
  level     AchievementLevel
  medalType MedalType?       @map("medal_type")
  year      Int
  image     String?
  order     Int              @default(0)
  isActive  Boolean          @default(true) @map("is_active")
  createdAt DateTime         @default(now()) @map("created_at")
  updatedAt DateTime         @updatedAt @map("updated_at")

  @@map("achievements")
}

model Gallery {
  id          String          @id @default(cuid())
  title       String
  description String?
  image       String
  category    GalleryCategory
  order       Int             @default(0)
  isActive    Boolean         @default(true) @map("is_active")
  createdAt   DateTime        @default(now()) @map("created_at")
  updatedAt   DateTime        @updatedAt @map("updated_at")

  @@map("gallery")
}

model Facility {
  id          String   @id @default(cuid())
  name        String
  description String?
  icon        String?
  image       String?
  order       Int      @default(0)
  isActive    Boolean  @default(true) @map("is_active")
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  @@map("facilities")
}

model Extracurricular {
  id          String         @id @default(cuid())
  name        String
  description String?
  category    EkskulCategory
  icon        String?
  image       String?
  order       Int            @default(0)
  isActive    Boolean        @default(true) @map("is_active")
  createdAt   DateTime       @default(now()) @map("created_at")
  updatedAt   DateTime       @updatedAt @map("updated_at")

  @@map("extracurriculars")
}

model Faq {
  id        String   @id @default(cuid())
  question  String
  answer    String
  order     Int      @default(0)
  isActive  Boolean  @default(true) @map("is_active")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("faqs")
}

model Contact {
  id          String      @id @default(cuid())
  name        String
  value       String
  type        ContactType
  description String?
  order       Int         @default(0)
  isActive    Boolean     @default(true) @map("is_active")
  createdAt   DateTime    @default(now()) @map("created_at")
  updatedAt   DateTime    @updatedAt @map("updated_at")

  @@map("contacts")
}

model SocialLink {
  id        String         @id @default(cuid())
  platform  SocialPlatform
  url       String
  username  String?
  order     Int            @default(0)
  isActive  Boolean        @default(true) @map("is_active")
  createdAt DateTime       @default(now()) @map("created_at")
  updatedAt DateTime       @updatedAt @map("updated_at")

  @@map("social_links")
}

model SchoolSetting {
  id        String      @id @default(cuid())
  key       String      @unique
  value     String
  type      SettingType @default(TEXT)
  label     String
  group     String      @default("general")
  order     Int         @default(0)
  createdAt DateTime    @default(now()) @map("created_at")
  updatedAt DateTime    @updatedAt @map("updated_at")

  @@map("school_settings")
}

enum JenisKelamin {
  LAKI_LAKI
  PEREMPUAN
}

enum ProgramKeahlian {
  TEKNIK_OTOMOTIF
  PEMROGRAMAN_PERANGKAT_LUNAK_DAN_GIM
  TEKNIK_JARINGAN_KOMPUTER_DAN_TELEKOMUNIKASI
  MANAJEMEN_PERKANTORAN_DAN_LAYANAN_BISNIS
  AKUNTANSI_DAN_KEUANGAN_LEMBAGA
}

enum Pendidikan {
  SD
  SMP
  SMA
  SMK
  D1
  D2
  D3
  D4
  S1
  S2
  S3
  TIDAK_SEKOLAH
}

enum TestimonialType {
  ALUMNI
  ORANG_TUA
  GURU
  MITRA
}

enum MedalType {
  GOLD
  SILVER
  BRONZE
}

enum AchievementLevel {
  INTERNASIONAL
  NASIONAL
  PROVINSI
  KOTA
  KECAMATAN
  SEKOLAH
}

enum GalleryCategory {
  FASILITAS
  KEGIATAN
  PRESTASI
  EKSKUL
  LAINNYA
}

enum EkskulCategory {
  ORGANISASI
  KEPANDUAN
  BELADIRI
  OLAHRAGA
  SENI
  AKADEMIK
  KEAGAMAAN
  LAINNYA
}

enum ContactType {
  WHATSAPP
  PHONE
  EMAIL
}

enum SocialPlatform {
  INSTAGRAM
  FACEBOOK
  YOUTUBE
  TWITTER
  TIKTOK
  LINKEDIN
  WEBSITE
}

enum SettingType {
  TEXT
  TEXTAREA
  HTML
  JSON
  IMAGE
  NUMBER
  BOOLEAN
}

enum StatusPendaftaran {
  PENDING
  DIVERIFIKASI
  DITOLAK
  DITERIMA
}
